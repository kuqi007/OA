<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.work.dao.WorkReimbursementDao">
	<resultMap type="workReimbursement" id="workReimbursementResultMap">
		<!--主键id -->
		<id property="id" column="id" />
		<!--创建时间 -->
		<result property="createDate" column="create_date" />
		<!--创建人id -->
		<result property="createBy" column="create_by" />
		<!--删除标记1-未删除2-已删除 -->
		<result property="delFlag" column="del_flag" />
		<!--部门id -->
		<result property="department" column="c_department" />
		<!--填写时间 -->
		<result property="time" column="c_time" />
		<!-- 申请人名字 -->
		<result property="name" column="c_name" />
		<!--出差事由 -->
		<result property="reason" column="c_reason" />
		<!--出差时间开始 -->
		<result property="timeBegin" column="c_time_begin" />
		<!--出差时间结束 -->
		<result property="timeEnd" column="c_time_end" />
		<!--共计天数 -->
		<result property="day" column="c_day" />
		<!--出差地点 -->
		<result property="place" column="c_place" />
		<!--出发时间1 -->
		<result property="timeSetout1" column="c_time_setout1" />
		<!--出发时间2 -->
		<result property="timeSetout2" column="c_time_setout2" />
		<!--出发时间3 -->
		<result property="timeSetout3" column="c_time_setout3" />
		<!--出发时间4 -->
		<result property="timeSetout4" column="c_time_setout4" />
		<!--出发时间5 -->
		<result property="timeSetout5" column="c_time_setout5" />
		<!--到达时间1 -->
		<result property="timeArrive1" column="c_time_arrive1" />
		<!--到达时间2 -->
		<result property="timeArrive2" column="c_time_arrive2" />
		<!--到达时间3 -->
		<result property="timeArrive3" column="c_time_arrive3" />
		<!--到达时间4 -->
		<result property="timeArrive4" column="c_time_arrive4" />
		<!--到达时间5 -->
		<result property="timeArrive5" column="c_time_arrive5" />
		<!--交通工具1 -->
		<result property="traffic1" column="c_traffic1" />
		<!--交通工具2 -->
		<result property="traffic2" column="c_traffic2" />
		<!--交通工具3 -->
		<result property="traffic3" column="c_traffic3" />
		<!--交通工具4 -->
		<result property="traffic4" column="c_traffic4" />
		<!--交通工具5 -->
		<result property="traffic5" column="c_traffic5" />
		<!--交通费单据1 -->
		<result property="trafficBill1" column="c_traffic_bill1" />
		<!--交通费单据2 -->
		<result property="trafficBill2" column="c_traffic_bill2" />
		<!--交通费单据3 -->
		<result property="trafficBill3" column="c_traffic_bill3" />
		<!--交通费单据4 -->
		<result property="trafficBill4" column="c_traffic_bill4" />
		<!--交通费单据5 -->
		<result property="trafficBill5" column="c_traffic_bill5" />
		<!--交通费金额1 -->
		<result property="trafficAmount1" column="c_traffic_amount1" />
		<!--交通费金额2 -->
		<result property="trafficAmount2" column="c_traffic_amount2" />
		<!--交通费金额3 -->
		<result property="trafficAmount3" column="c_traffic_amount3" />
		<!--交通费金额4 -->
		<result property="trafficAmount4" column="c_traffic_amount4" />
		<!--交通费金额5 -->
		<result property="trafficAmount5" column="c_traffic_amount5" />
		<!--出差补贴天数1 -->
		<result property="subsidyDay1" column="c_subsidy_day1" />
		<!--出差补贴天数2 -->
		<result property="subsidyDay2" column="c_subsidy_day2" />
		<!--出差补贴天数3 -->
		<result property="subsidyDay3" column="c_subsidy_day3" />
		<!--出差补贴天数4 -->
		<result property="subsidyDay4" column="c_subsidy_day4" />
		<!--出差补贴天数5 -->
		<result property="subsidyDay5" column="c_subsidy_day5" />
		<!--出差补贴金额1 -->
		<result property="subsidyAmount1" column="c_subsidy_amount1" />
		<!--出差补贴金额2 -->
		<result property="subsidyAmount2" column="c_subsidy_amount2" />
		<!--出差补贴金额3 -->
		<result property="subsidyAmount3" column="c_subsidy_amount3" />
		<!--出差补贴金额4 -->
		<result property="subsidyAmount4" column="c_subsidy_amount4" />
		<!--出差补贴金额5 -->
		<result property="subsidyAmount5" column="c_subsidy_amount5" />
		<!--其他费用单据张数1 -->
		<result property="otherNum1" column="c_other_num1" />
		<!--其他费用单据张数2 -->
		<result property="otherNum2" column="c_other_num2" />
		<!--其他费用单据张数3 -->
		<result property="otherNum3" column="c_other_num3" />
		<!--其他费用单据张数4 -->
		<result property="otherNum4" column="c_other_num4" />
		<!--其他费用单据张数5 -->
		<result property="otherNum5" column="c_other_num5" />
		<!--其他费用金额1 -->
		<result property="otherAmount1" column="c_other_amount1" />
		<!--其他费用金额2 -->
		<result property="otherAmount2" column="c_other_amount2" />
		<!--其他费用金额3 -->
		<result property="otherAmount3" column="c_other_amount3" />
		<!--其他费用金额4 -->
		<result property="otherAmount4" column="c_other_amount4" />
		<!--其他费用金额5 -->
		<result property="otherAmount5" column="c_other_amount5" />
		<!--合计金额 -->
		<result property="money" column="c_money" />
		<!--实际出差开始 -->
		<result property="actualBegin" column="c_actual_begin" />
		<!--实际出差结束 -->
		<result property="actualEnd" column="c_actual_end" />
		<!--报销总额 -->
		<result property="reimbursement" column="c_reimbursement" />
		<!--预借旅费 -->
		<result property="borrow" column="c_borrow" />
		<!--补领金额 -->
		<result property="replacement" column="c_replacement" />
		<!--退款金额 -->
		<result property="refund" column="c_refund" />
		<!-- 人力执勤人员id -->
		<result property="fill" column="c_fill"/>
		<result property="fillTime" column="c_fill_time"/>
		<result property="beginRole" column="c_begin_role" />
		<!--部门主管（1-同意2-不同意） -->
		<result property="opinion1" column="c_opinion1" />
		<!--部门主管签字 -->
		<result property="sign1" column="c_sign1" />
		<!--部门主管意见 -->
		<result property="text1" column="c_text1" />
		<!--部门主管签字时间 -->
		<result property="date1" column="c_date1" />
		<!--签字人id -->
		<result property="people1" column="c_people1" />
		<!--部门经理（1-同意2-不同意） -->
		<result property="opinion2" column="c_opinion2" />
		<!--部门经理签字 -->
		<result property="sign2" column="c_sign2" />
		<!--部门经理意见 -->
		<result property="text2" column="c_text2" />
		<!--部门经理签字时间 -->
		<result property="date2" column="c_date2" />
		<!--签字人id -->
		<result property="people2" column="c_people2" />
		<!--分管领导（1-同意2-不同意） -->
		<result property="opinion3" column="c_opinion3" />
		<!--分管领导签字 -->
		<result property="sign3" column="c_sign3" />
		<!--分管领导意见 -->
		<result property="text3" column="c_text3" />
		<!--分管领导签字时间 -->
		<result property="date3" column="c_date3" />
		<!--签字人id -->
		<result property="people3" column="c_people3" />
		<!--财务经理（1-同意2-不同意） -->
		<result property="opinion4" column="c_opinion4" />
		<!--财务经理签字 -->
		<result property="sign4" column="c_sign4" />
		<!--财务经理意见 -->
		<result property="text4" column="c_text4" />
		<!--财务经理签证时间 -->
		<result property="date4" column="c_date4" />
		<!--签字人id -->
		<result property="people4" column="c_people4" />
		<!--总经理（1-同意2-不同意） -->
		<result property="opinion5" column="c_opinion5" />
		<!--总经理签字 -->
		<result property="sign5" column="c_sign5" />
		<!--总经理意见 -->
		<result property="text5" column="c_text5" />
		<!--总经理签字时间 -->
		<result property="date5" column="c_date5" />
		<!--签字人id -->
		<result property="people5" column="c_people5" />
		<result property="opinion6" column="c_opinion6" />
		<result property="sign6" column="c_sign6" />
		<result property="text6" column="c_text6" />
		<result property="date6" column="c_date6" />
		<result property="people6" column="c_people6" />
		<!--申请状态1-第一步审批，2-第二步审批 -->
		<result property="state" column="c_state" />
		<!--0-审批中1-审批通过2-审批失败 -->
		<result property="flag" column="c_flag" />
		<!-- 公司内部自定义编号 -->
		<result property="transaction" column="c_transaction"/>
		<result property="flagPayment" column="c_flag_payment"/>
		<result property="emergency" column="c_emergency"/>
		<result property="examination" column="c_examination"/>
	</resultMap>

	<sql id="allColumnSql">
		o.id,
		o.create_date,
		o.create_by,
		o.del_flag,
		o.c_department,
		o.c_time,
		o.c_name,
		o.c_reason,
		o.c_time_begin,
		o.c_time_end,
		o.c_day,
		o.c_place,
		o.c_time_setout1,
		o.c_time_setout2,
		o.c_time_setout3,
		o.c_time_setout4,
		o.c_time_setout5,
		o.c_time_arrive1,
		o.c_time_arrive2,
		o.c_time_arrive3,
		o.c_time_arrive4,
		o.c_time_arrive5,
		o.c_traffic1,
		o.c_traffic2,
		o.c_traffic3,
		o.c_traffic4,
		o.c_traffic5,
		o.c_traffic_bill1,
		o.c_traffic_bill2,
		o.c_traffic_bill3,
		o.c_traffic_bill4,
		o.c_traffic_bill5,
		o.c_traffic_amount1,
		o.c_traffic_amount2,
		o.c_traffic_amount3,
		o.c_traffic_amount4,
		o.c_traffic_amount5,
		o.c_subsidy_day1,
		o.c_subsidy_day2,
		o.c_subsidy_day3,
		o.c_subsidy_day4,
		o.c_subsidy_day5,
		o.c_subsidy_amount1,
		o.c_subsidy_amount2,
		o.c_subsidy_amount3,
		o.c_subsidy_amount4,
		o.c_subsidy_amount5,
		o.c_other_num1,
		o.c_other_num2,
		o.c_other_num3,
		o.c_other_num4,
		o.c_other_num5,
		o.c_other_amount1,
		o.c_other_amount2,
		o.c_other_amount3,
		o.c_other_amount4,
		o.c_other_amount5,
		o.c_money,
		o.c_actual_begin,
		o.c_actual_end,
		o.c_reimbursement,
		o.c_borrow,
		o.c_replacement,
		o.c_refund,
		o.c_fill,
		o.c_fill_time,
		o.c_begin_role,
		o.c_opinion1,
		o.c_sign1,
		o.c_text1,
		o.c_date1,
		o.c_people1,
		o.c_opinion2,
		o.c_sign2,
		o.c_text2,
		o.c_date2,
		o.c_people2,
		o.c_opinion3,
		o.c_sign3,
		o.c_text3,
		o.c_date3,
		o.c_people3,
		o.c_opinion4,
		o.c_sign4,
		o.c_text4,
		o.c_date4,
		o.c_people4,
		o.c_opinion5,
		o.c_sign5,
		o.c_text5,
		o.c_date5,
		o.c_people5,
		o.c_opinion6,
		o.c_sign6,
		o.c_text6,
		o.c_date6,
		o.c_people6,
		o.c_state,
		o.c_flag,
		o.c_transaction,
		o.c_flag_payment,
		o.c_emergency,
		o.c_examination
	</sql>

	<sql id="searchConditionSql">
	<if test="condition.name != null and condition.name != ''">
			AND o.c_name like '%${condition.name}%' 
		</if>
		<if test="condition.department != null and condition.department != ''">
			AND o.c_department = #{condition.department} 
		</if>
		<if test="condition.place != null and condition.place != ''">
			AND o.c_place like '%${condition.place}%' 
		</if>
		<if test="condition.state != null">
			AND o.c_state = #{condition.state} 
		</if>
		<if test="condition.createBy != null and condition.createBy != ''">
			AND o.create_by = #{condition.createBy} 
		</if>
		<if test="condition.flag != null">
			AND o.c_flag = #{condition.flag} 
		</if>
		<if test="condition.signPeople != null and condition.signPeople != ''">
			AND (o.c_people1 = #{condition.signPeople}
			OR  o.c_people2 = #{condition.signPeople}
			OR  o.c_people3 = #{condition.signPeople}
			OR  o.c_people4 = #{condition.signPeople}
			OR  o.c_people5 = #{condition.signPeople}
			OR (o.create_by = #{condition.signPeople} AND c_flag!=0))
		</if>
		<if test="condition.transaction != null and condition.transaction != ''">
			AND o.c_transaction like '%${condition.transaction}%'
		</if>
		<if test="condition.beginTime != null and condition.beginTime != ''">
			AND o.create_date >= #{condition.beginTime} 
		</if>
		<if test="condition.endTime != null and condition.endTime != ''">
			<![CDATA[  AND o.create_date <= #{condition.endTime} ]]>
		</if>
		<if test="condition.trialIng != null">
			<![CDATA[  AND o.c_flag != 0 ]]>
		</if>
		<if test="condition.examination != null and condition.examination != ''">
			  AND o.c_examination = #{condition.examination}
		</if>
		AND o.del_flag = 0
		ORDER BY o.create_date DESC
	</sql>

	<select id="listWorkReimbursementByPage" resultMap="workReimbursementResultMap">
		SELECT <include refid="allColumnSql"/>
		FROM work_reimbursement o
		WHERE 1=1 <include refid="searchConditionSql"/> 
		LIMIT #{pageNoBegin},#{pageSize} 
	</select>
	<select id="listWorkReimbursement" resultMap="workReimbursementResultMap">
		SELECT <include refid="allColumnSql"/>
		FROM work_reimbursement o
		WHERE 1=1 <include refid="searchConditionSql"/> 
	</select>
	<select id="listWorkReimbursementByPageCount" resultType="int">
		SELECT count(1) FROM work_reimbursement o
		WHERE 1=1 <include refid="searchConditionSql"/> 
	</select>

	<select id="getWorkReimbursementById" resultMap="workReimbursementResultMap">
		SELECT <include refid="allColumnSql"/>
		FROM work_reimbursement o
		WHERE o.ID = #{id}
	</select>

	<insert id="add" parameterType="workReimbursement">
		INSERT INTO work_reimbursement
		(
		id,
		create_date,
		create_by,
		del_flag,
		c_department,
		c_time,
		c_name,
		c_reason,
		c_time_begin,
		c_time_end,
		c_day,
		c_place,
		c_time_setout1,
		c_time_setout2,
		c_time_setout3,
		c_time_setout4,
		c_time_setout5,
		c_time_arrive1,
		c_time_arrive2,
		c_time_arrive3,
		c_time_arrive4,
		c_time_arrive5,
		c_traffic1,
		c_traffic2,
		c_traffic3,
		c_traffic4,
		c_traffic5,
		c_traffic_bill1,
		c_traffic_bill2,
		c_traffic_bill3,
		c_traffic_bill4,
		c_traffic_bill5,
		c_traffic_amount1,
		c_traffic_amount2,
		c_traffic_amount3,
		c_traffic_amount4,
		c_traffic_amount5,
		c_subsidy_day1,
		c_subsidy_day2,
		c_subsidy_day3,
		c_subsidy_day4,
		c_subsidy_day5,
		c_subsidy_amount1,
		c_subsidy_amount2,
		c_subsidy_amount3,
		c_subsidy_amount4,
		c_subsidy_amount5,
		c_other_num1,
		c_other_num2,
		c_other_num3,
		c_other_num4,
		c_other_num5,
		c_other_amount1,
		c_other_amount2,
		c_other_amount3,
		c_other_amount4,
		c_other_amount5,
		c_money,
		c_actual_begin,
		c_actual_end,
		c_reimbursement,
		c_borrow,
		c_replacement,
		c_refund,
		c_fill,
		c_fill_time,
		c_begin_role,
		c_opinion1,
		c_sign1,
		c_text1,
		c_date1,
		c_people1,
		c_opinion2,
		c_sign2,
		c_text2,
		c_date2,
		c_people2,
		c_opinion3,
		c_sign3,
		c_text3,
		c_date3,
		c_people3,
		c_opinion4,
		c_sign4,
		c_text4,
		c_date4,
		c_people4,
		c_opinion5,
		c_sign5,
		c_text5,
		c_date5,
		c_people5,
		c_opinion6,
		c_sign6,
		c_text6,
		c_date6,
		c_people6,
		c_state,
		c_flag,
		c_transaction,
		c_flag_payment,
		c_emergency,
		c_examination
		)
		VALUES
		(
		#{id},
		SYSDATE(),
		#{createBy},
		0,
		#{department},
		#{time},
		#{name},
		#{reason},
		#{timeBegin},
		#{timeEnd},
		#{day},
		#{place},
		#{timeSetout1},
		#{timeSetout2},
		#{timeSetout3},
		#{timeSetout4},
		#{timeSetout5},
		#{timeArrive1},
		#{timeArrive2},
		#{timeArrive3},
		#{timeArrive4},
		#{timeArrive5},
		#{traffic1},
		#{traffic2},
		#{traffic3},
		#{traffic4},
		#{traffic5},
		#{trafficBill1},
		#{trafficBill2},
		#{trafficBill3},
		#{trafficBill4},
		#{trafficBill5},
		#{trafficAmount1},
		#{trafficAmount2},
		#{trafficAmount3},
		#{trafficAmount4},
		#{trafficAmount5},
		#{subsidyDay1},
		#{subsidyDay2},
		#{subsidyDay3},
		#{subsidyDay4},
		#{subsidyDay5},
		#{subsidyAmount1},
		#{subsidyAmount2},
		#{subsidyAmount3},
		#{subsidyAmount4},
		#{subsidyAmount5},
		#{otherNum1},
		#{otherNum2},
		#{otherNum3},
		#{otherNum4},
		#{otherNum5},
		#{otherAmount1},
		#{otherAmount2},
		#{otherAmount3},
		#{otherAmount4},
		#{otherAmount5},
		#{money},
		#{actualBegin},
		#{actualEnd},
		#{reimbursement},
		#{borrow},
		#{replacement},
		#{refund},
		#{fill},
		#{fillTime},
		#{beginRole},
		#{opinion1},
		#{sign1},
		#{text1},
		#{date1},
		#{people1},
		#{opinion2},
		#{sign2},
		#{text2},
		#{date2},
		#{people2},
		#{opinion3},
		#{sign3},
		#{text3},
		#{date3},
		#{people3},
		#{opinion4},
		#{sign4},
		#{text4},
		#{date4},
		#{people4},
		#{opinion5},
		#{sign5},
		#{text5},
		#{date5},
		#{people5},
		#{opinion6},
		#{sign6},
		#{text6},
		#{date6},
		#{people6},
		#{state},
		#{flag},
		#{transaction},
		0,
		#{emergency},
		#{examination}
		)
	</insert>

	<update id="update" parameterType="workReimbursement" >
		UPDATE work_reimbursement SET
		c_fill = #{fill},
		c_fill_time = #{fillTime},
		c_begin_role = #{beginRole},
		c_opinion1 = #{opinion1},
		c_sign1 = #{sign1},
		c_text1 = #{text1},
		c_date1 = #{date1},
		c_people1 = #{people1},
		c_opinion2 = #{opinion2},
		c_sign2 = #{sign2},
		c_text2 = #{text2},
		c_date2 = #{date2},
		c_people2 = #{people2},
		c_opinion3 = #{opinion3},
		c_sign3 = #{sign3},
		c_text3 = #{text3},
		c_date3 = #{date3},
		c_people3 = #{people3},
		c_opinion4 = #{opinion4},
		c_sign4 = #{sign4},
		c_text4 = #{text4},
		c_date4 = #{date4},
		c_people4 = #{people4},
		c_opinion5 = #{opinion5},
		c_sign5 = #{sign5},
		c_text5 = #{text5},
		c_date5 = #{date5},
		c_people5 = #{people5},
		c_opinion6 = #{opinion6},
		c_sign6 = #{sign6},
		c_text6 = #{text6},
		c_date6 = #{date6},
		c_people6 = #{people6},
		c_state = #{state},
		c_flag = #{flag},
		c_examination = #{examination}
		WHERE ID = #{id}
	</update>
	<update id="updateDate" parameterType="workReimbursement" >
		UPDATE work_reimbursement SET
		c_actual_begin = #{be},
		c_actual_end = #{en}
		WHERE ID = #{id}
	</update>

<!-- 	<delete id="delByIds">
		DELETE FROM work_reimbursement 
		WHERE ID IN 
		<foreach collection="array" index="index" item="item" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete> -->
	<update id="delByIds">
		UPDATE work_reimbursement SET del_flag = 1 
		WHERE ID IN 
		<foreach collection="array" index="index" item="item" open="(" separator="," close=")">
			#{item}
		</foreach>
	</update>
	<update id="termination">
		UPDATE work_reimbursement SET c_flag = 3 
		WHERE ID =#{id}
	</update>
	<update id="changePayment">
		UPDATE work_reimbursement SET c_flag_payment = #{flag} 
		WHERE ID =#{id}
	</update>
	
</mapper>